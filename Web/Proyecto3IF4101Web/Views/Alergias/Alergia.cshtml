@{
    ViewData["Title"] = "Gestion de Alergias";
}


@model Proyecto3IF4101Web.Models.AlergiasModel;


<div class="container-fluid">
    <div class="row">

        <main class="col-md-12 ms-sm-auto px-md-1">
            <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-2 border-bottom">

                <div class="col col-md-2">
                    <h4>Registrar Alergias de Pacientes</h4>
                    <form name="formVacuna" id="formVacuna">

                        <div class="col-12">
                            <label for="paciente" class="form-label">Cedula de Paciente</label>
                            <select class="form-select form-select mb-3" name="cedula" id="cedula" required>
                                <option value=0>Seleccione una Cédula</option>
                                @foreach (Pacientes temp in ViewBag.Pacientes)
                                {
                                    <option value="@temp.CEDULA">
                                        @temp.CEDULA  @temp.NOMBRE
                                    </option>

                                }
                            </select>
                        </div>

                        <div class="col-12">
                            <label for="alergiasfor" class="form-label">Alergia</label><br />
                            <select class="form-select form-select mb-3" name="alergia" id="alergia" onchange="ObtenerAlergia()" required>
                                <option value=0>Seleccione una Alergia</option>
                                @foreach (Alergias temp in ViewBag.Alergias)
                                {
                                    <option value="@temp.ID">
                                        @temp.NOMBRE
                                    </option>

                                }

                            </select>
                        </div>

                        <div class="col-12  ">
                            <label for="start">Descripción:</label>

                            <textarea class="form-control" type="textArea" id="desc" name="desc" required>
                            </textarea>

                        </div>

                        <div class="col-12 form-group ">
                            <label for="start">Fecha de Aplicacion:</label>

                            <input type="date" placeholder="dd-mm-yyyyy" id="fecha" name="fecha" required>

                        </div>

                        <div class="col-12  ">
                            <label for="start">Madicamentos:</label>

                            <textarea class="form-control" type="textArea" id="medi" name="medi" required>
                            </textarea>

                        </div>

                        <div class="text-center">
                            <span id="resultado"></span>
                        </div>
                        <div class="col-12" id="actualizar">
                          
                        </div>
                        <br />
                        <div class="col-12 ">
                            <input type="button" onclick="RegistrarAlergia()" value="Registrar" class="btn btn-lg btn-primary btn-block" />
                        </div>

                    </form>
                    <br />
                </div>


                <div class="col col-md-10  table-responsive" style="padding-left:7%">

                    <label for="paciente" class="form-label">Buscar Vacunas de Paciente</label>
                    <select class="form-select form-select mb-3" name="paciente" id="paciente" required>
                        <option value=0>Seleccione una Cédula</option>
                        @foreach (Pacientes temp in ViewBag.Pacientes)
                        {
                            <option value="@temp.CEDULA">
                                @temp.CEDULA  @temp.NOMBRE
                            </option>

                        }
                    </select>
                    <input type="button" onclick="DatosPacienteAlergias()" value="Buscar" class="btn btn-lg btn-primary" />

                    <table id="TableAlergias" name="TableAlergias" class="table table-striped table-responsive table-hover">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Cedula</th>
                                <th>Alergia ID</th>
                                <th>Alergia</th>
                                <th>Descripción</th>
                                <th>Diagnosticada</th>
                                <th>Medicamentos</th>
                            </tr>
                        </thead>
                        <tbody id="TAlergias">
                        </tbody>
                    </table>
                    <div>
                        <span id="borrado"></span>
                    </div>


                </div>
            </div>
        </main>

    </div>

</div>
